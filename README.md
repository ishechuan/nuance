# Nuance ğŸ¯

**AI-powered English Learning Assistant** â€” Extract, Analyze, Master

Nuance æ˜¯ä¸€æ¬¾æ™ºèƒ½è‹±è¯­å­¦ä¹ æµè§ˆå™¨æ‰©å±•ï¼Œå¸®åŠ©ä½ ä»ä»»ä½•è‹±æ–‡ç½‘é¡µä¸­æå–å¹¶å­¦ä¹ æœ‰ä»·å€¼çš„è¯­è¨€çŸ¥è¯†ç‚¹ã€‚

![WXT](https://img.shields.io/badge/WXT-0.20-blue)
![React](https://img.shields.io/badge/React-19-61DAFB)
![TypeScript](https://img.shields.io/badge/TypeScript-5.9-3178C6)
![Supabase](https://img.shields.io/badge/Supabase-Backend-3ECF8E)
![License](https://img.shields.io/badge/License-MIT-green)

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

### ğŸ” æ™ºèƒ½å†…å®¹æå–

- ä½¿ç”¨ [Mozilla Readability](https://github.com/mozilla/readability) è‡ªåŠ¨æå–ç½‘é¡µæ­£æ–‡
- è¿‡æ»¤å¹¿å‘Šã€å¯¼èˆªç­‰å¹²æ‰°å†…å®¹ï¼Œä¸“æ³¨äºæ ¸å¿ƒæ–‡ç« 

### ğŸ¤– AI æ·±åº¦åˆ†æ

åŸºäº DeepSeek AI å¯¹æ–‡æœ¬è¿›è¡Œä¸‰ç»´åº¦è¯­è¨€åˆ†æï¼š

| ç±»åˆ« | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **ä¹ æƒ¯ç”¨æ³•** | åœ°é“ä¹ è¯­ã€çŸ­è¯­åŠ¨è¯ã€å›ºå®šæ­é… | "running out of time", "make a decision" |
| **æ ¸å¿ƒè¯­æ³•** | å€’è£…å¥ã€è™šæ‹Ÿè¯­æ°”ã€å®šè¯­ä»å¥ç­‰è¿›é˜¶å¥å‹ | åˆ†è¯çŸ­è¯­ã€å¼ºè°ƒå¥ |
| **æ ¸å¿ƒè¯æ±‡** | B1-C2 çº§åˆ«è¯æ±‡ï¼Œå«ä¸­æ–‡é‡Šä¹‰å’Œè¯­å¢ƒ | æŒ‰éš¾åº¦ç­‰çº§æ ‡æ³¨ |

### â¤ï¸ æ”¶è—ç³»ç»Ÿ

- **ä¸€é”®æ”¶è—**ï¼šæ”¶è—ä»»æ„ä¹ æƒ¯ç”¨æ³•ã€è¯­æ³•ç»“æ„æˆ–è¯æ±‡
- **å¤šç»´åº¦æŸ¥çœ‹**ï¼šæŒ‰æ–‡ç« æˆ–æŒ‰è¡¨è¾¾å¼ä¸¤ç§è§†å›¾
- **æ™ºèƒ½æœç´¢**ï¼šå¿«é€Ÿæ£€ç´¢æ”¶è—å†…å®¹
- **äº‘ç«¯åŒæ­¥**ï¼šæ”¶è—æ•°æ®ä¿å­˜åœ¨äº‘ç«¯ï¼Œè·¨è®¾å¤‡åŒæ­¥

### ğŸ‘¤ ç”¨æˆ·ç³»ç»Ÿ

- **é‚®ç®±æ³¨å†Œ/ç™»å½•**ï¼šç®€å•çš„é‚®ç®±å¯†ç è®¤è¯
- **ä½¿ç”¨ç»Ÿè®¡**ï¼šæŸ¥çœ‹æ¯æ—¥ä½¿ç”¨æ¬¡æ•°
- **å…è´¹é¢åº¦**ï¼šæ¯æ—¥ 5 æ¬¡å…è´¹åˆ†æ
- **Pro è®¢é˜…**ï¼šæ— é™æ¬¡åˆ†æï¼ˆå¼€å‘ä¸­ï¼‰

### ğŸ¨ ç°ä»£åŒ–ç•Œé¢

- ç®€æ´ä¼˜é›…çš„ä¾§è¾¹æ è®¾è®¡
- åˆ†ç±»æ ‡ç­¾é¡µå¿«é€Ÿåˆ‡æ¢
- ç‚¹å‡»å¡ç‰‡é«˜äº®åŸæ–‡å®šä½

### ğŸ“ æ™ºèƒ½é«˜äº®

- ä¸€é”®å®šä½ï¼šç‚¹å‡»åˆ†æå¡ç‰‡ï¼Œè‡ªåŠ¨åœ¨ç½‘é¡µä¸­é«˜äº®å¯¹åº”å¥å­
- å¹³æ»‘æ»šåŠ¨åˆ°ç›®æ ‡ä½ç½®
- æŸ”å’Œçš„é«˜äº®åŠ¨ç”»æ•ˆæœ

## ğŸ“¦ å®‰è£…

### å‰ç½®è¦æ±‚

- Node.js 18+
- pnpm (æ¨è) æˆ– npm
- Supabase é¡¹ç›®ï¼ˆç”¨äºåç«¯æœåŠ¡ï¼‰

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### ç¯å¢ƒé…ç½®

åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```bash
VITE_SUPABASE_URL=your_supabase_project_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### å¼€å‘æ¨¡å¼

```bash
# Chrome
pnpm dev

# Firefox
pnpm dev:firefox
```

è¿è¡Œåä¼šè‡ªåŠ¨æ‰“å¼€å¸¦æœ‰æ‰©å±•çš„ Chrome/Firefox æµè§ˆå™¨ã€‚

### ç”Ÿäº§æ„å»º

```bash
# Chrome
pnpm build

# Firefox
pnpm build:firefox
```

æ„å»ºäº§ç‰©ä½äº `.output/chrome-mv3` æˆ– `.output/firefox-mv3`ã€‚

### æ‰“åŒ…å‘å¸ƒ

```bash
# Chrome
pnpm zip

# Firefox
pnpm zip:firefox
```

## ğŸš€ ä½¿ç”¨æŒ‡å—

### 1. æ³¨å†Œ/ç™»å½•

1. ç‚¹å‡»æ‰©å±•å›¾æ ‡æ‰“å¼€ä¾§è¾¹æ 
2. è¾“å…¥é‚®ç®±å’Œå¯†ç 
3. é¦–æ¬¡ä½¿ç”¨ä¼šè‡ªåŠ¨æ³¨å†Œè´¦å·

### 2. åˆ†ææ–‡ç« 

1. æ‰“å¼€ä»»æ„è‹±æ–‡æ–‡ç« é¡µé¢ï¼ˆæ–°é—»ã€åšå®¢ã€è®ºæ–‡ç­‰ï¼‰
2. ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ ä¸­çš„ Nuance å›¾æ ‡
3. åœ¨ä¾§è¾¹æ ä¸­ç‚¹å‡» **"åˆ†æé¡µé¢"** æŒ‰é’®
4. ç­‰å¾… 10-30 ç§’ï¼ŒAI å°†å®Œæˆæ·±åº¦åˆ†æ

### 3. å­¦ä¹ å†…å®¹

- **ä¹ æƒ¯ç”¨æ³•** æ ‡ç­¾ï¼šæŸ¥çœ‹ä¹ æƒ¯ç”¨æ³•å’Œå›ºå®šæ­é…
- **è¯­æ³•** æ ‡ç­¾ï¼šå­¦ä¹ å¤æ‚å¥å‹ç»“æ„
- **è¯æ±‡** æ ‡ç­¾ï¼šæŒæ¡æ ¸å¿ƒè¯æ±‡

ç‚¹å‡»ä»»æ„å¡ç‰‡ï¼ŒåŸæ–‡ä¸­å¯¹åº”å†…å®¹ä¼šè¢«é«˜äº®æ˜¾ç¤ºå¹¶è‡ªåŠ¨æ»šåŠ¨åˆ°è§†é‡å†…ã€‚

### 4. æ”¶è—ç®¡ç†

- ç‚¹å‡»å¡ç‰‡ä¸Šçš„ â¤ï¸ æŒ‰é’®æ”¶è—å†…å®¹
- ç‚¹å‡»é¡¶éƒ¨ â¤ï¸ å›¾æ ‡è¿›å…¥æ”¶è—å¤¹
- æ”¯æŒæŒ‰æ–‡ç« æˆ–æŒ‰è¡¨è¾¾å¼ä¸¤ç§è§†å›¾æµè§ˆ
- ä½¿ç”¨æœç´¢æ¡†å¿«é€ŸæŸ¥æ‰¾æ”¶è—

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sidepanel (React + Zustand)                                â”‚
â”‚    â””â”€ browser.runtime.sendMessage()                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Background Script (Service Worker)                         â”‚
â”‚    â”œâ”€ handlers/       æ¶ˆæ¯è·¯ç”±å±‚                             â”‚
â”‚    â”œâ”€ middleware/     è®¤è¯ä¸­é—´ä»¶                             â”‚
â”‚    â”œâ”€ services/       ä¸šåŠ¡é€»è¾‘å±‚                             â”‚
â”‚    â”œâ”€ repositories/   æ•°æ®è®¿é—®å±‚                             â”‚
â”‚    â””â”€ storage/        Session å­˜å‚¨ï¼ˆå•ä¸€æ•°æ®æºï¼‰              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase (Auth + Database + Edge Functions)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®å½•ç»“æ„

```
nuance-extension/
â”œâ”€â”€ entrypoints/
â”‚   â”œâ”€â”€ background.ts              # Service Worker å…¥å£
â”‚   â”œâ”€â”€ content.ts                 # Content Script - å†…å®¹æå–ã€é«˜äº®
â”‚   â””â”€â”€ sidepanel/                 # ä¾§è¾¹æ  React åº”ç”¨
â”‚       â”œâ”€â”€ App.tsx                # ä¸»ç»„ä»¶
â”‚       â”œâ”€â”€ main.tsx               # åº”ç”¨å…¥å£
â”‚       â”œâ”€â”€ components/            # UI ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ Favorites.tsx              # æ”¶è—å¤¹ä¸»ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ FavoritesByArticle.tsx     # æŒ‰æ–‡ç« æŸ¥çœ‹æ”¶è—
â”‚       â”‚   â”œâ”€â”€ FavoritesByExpression.tsx  # æŒ‰è¡¨è¾¾å¼æŸ¥çœ‹æ”¶è—
â”‚       â”‚   â”œâ”€â”€ IdiomCard.tsx              # ä¹ æƒ¯ç”¨æ³•å¡ç‰‡
â”‚       â”‚   â”œâ”€â”€ SyntaxCard.tsx             # è¯­æ³•å¡ç‰‡
â”‚       â”‚   â”œâ”€â”€ VocabularyCard.tsx         # è¯æ±‡å¡ç‰‡
â”‚       â”‚   â”œâ”€â”€ LoginPanel.tsx             # ç™»å½•é¢æ¿
â”‚       â”‚   â”œâ”€â”€ Settings.tsx               # è®¾ç½®é¢æ¿
â”‚       â”‚   â””â”€â”€ UsageStatus.tsx            # ä½¿ç”¨ç»Ÿè®¡
â”‚       â”œâ”€â”€ store/
â”‚       â”‚   â””â”€â”€ auth.ts            # Zustand è®¤è¯çŠ¶æ€ç®¡ç†
â”‚       â””â”€â”€ styles.css             # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ messages.ts                # æ¶ˆæ¯ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ prompts.ts                 # AI Prompt æ¨¡æ¿
â”‚   â”œâ”€â”€ storage.ts                 # æœ¬åœ°å­˜å‚¨ç±»å‹ä¸å·¥å…·
â”‚   â””â”€â”€ background/                # Background åˆ†å±‚æ¶æ„
â”‚       â”œâ”€â”€ client/
â”‚       â”‚   â””â”€â”€ supabase.ts        # Supabase å®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ errors.ts              # ç»Ÿä¸€é”™è¯¯ç±»å‹å®šä¹‰
â”‚       â”œâ”€â”€ handlers/
â”‚       â”‚   â””â”€â”€ message-handler.ts # æ¶ˆæ¯è·¯ç”±ä¸ç»Ÿä¸€é”™è¯¯å¤„ç†
â”‚       â”œâ”€â”€ middleware/
â”‚       â”‚   â””â”€â”€ auth-middleware.ts # è®¤è¯ä¸­é—´ä»¶
â”‚       â”œâ”€â”€ repositories/          # æ•°æ®è®¿é—®å±‚ï¼ˆçº¯ API è°ƒç”¨ï¼‰
â”‚       â”‚   â”œâ”€â”€ analysis-repository.ts
â”‚       â”‚   â”œâ”€â”€ article-repository.ts
â”‚       â”‚   â”œâ”€â”€ auth-repository.ts
â”‚       â”‚   â”œâ”€â”€ favorite-repository.ts
â”‚       â”‚   â””â”€â”€ profile-repository.ts
â”‚       â”œâ”€â”€ services/              # ä¸šåŠ¡é€»è¾‘å±‚
â”‚       â”‚   â”œâ”€â”€ analysis-service.ts
â”‚       â”‚   â”œâ”€â”€ auth-service.ts
â”‚       â”‚   â””â”€â”€ favorite-service.ts
â”‚       â”œâ”€â”€ storage/
â”‚       â”‚   â””â”€â”€ session-storage.ts # Session å­˜å‚¨ï¼ˆå•ä¸€æ•°æ®æºï¼‰
â”‚       â””â”€â”€ utils/
â”‚           â””â”€â”€ content-helpers.ts # å†…å®¹å¤„ç†å·¥å…·
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ functions/
â”‚   â”‚   â””â”€â”€ analyze/               # AI åˆ†æ Edge Function
â”‚   â””â”€â”€ migrations/
â”‚       â””â”€â”€ 001_init.sql           # æ•°æ®åº“åˆå§‹åŒ–
â”œâ”€â”€ public/
â”‚   â””â”€â”€ icon/                      # æ‰©å±•å›¾æ ‡
â””â”€â”€ wxt.config.ts                  # WXT é…ç½®
```

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| **[WXT](https://wxt.dev/)** | ç°ä»£æµè§ˆå™¨æ‰©å±•å¼€å‘æ¡†æ¶ |
| **React 19** | UI æ¡†æ¶ |
| **TypeScript** | ç±»å‹å®‰å…¨ |
| **Zustand** | å‰ç«¯çŠ¶æ€ç®¡ç† |
| **Supabase** | åç«¯æœåŠ¡ï¼ˆè®¤è¯ã€æ•°æ®åº“ã€Edge Functionsï¼‰ |
| **Mozilla Readability** | ç½‘é¡µæ­£æ–‡æå– |
| **DeepSeek API** | AI æ–‡æœ¬åˆ†æ |

### Background æ¶æ„è®¾è®¡

é‡‡ç”¨åˆ†å±‚æ¶æ„ï¼ŒèŒè´£æ¸…æ™°ï¼š

| å±‚çº§ | èŒè´£ | ç¤ºä¾‹ |
|------|------|------|
| **Handlers** | æ¶ˆæ¯è·¯ç”±ã€ç»Ÿä¸€é”™è¯¯å¤„ç† | `message-handler.ts` |
| **Middleware** | è®¤è¯æ£€æŸ¥ã€æƒé™éªŒè¯ | `auth-middleware.ts` |
| **Services** | ä¸šåŠ¡é€»è¾‘ç¼–æ’ | `auth-service.ts`, `favorite-service.ts` |
| **Repositories** | æ•°æ®è®¿é—®ï¼ˆSupabase APIï¼‰ | `auth-repository.ts`, `favorite-repository.ts` |
| **Storage** | Session æŒä¹…åŒ–ï¼ˆå•ä¸€æ•°æ®æºï¼‰ | `session-storage.ts` |

**é”™è¯¯å¤„ç†**ï¼šæ‰€æœ‰é”™è¯¯ç»Ÿä¸€åœ¨ `message-handler.ts` æ•è·å¹¶è½¬æ¢ä¸ºæ ‡å‡†å“åº”æ ¼å¼ã€‚

**è®¤è¯æµç¨‹**ï¼š`session-storage.ts` ä½œä¸ºè®¤è¯çŠ¶æ€çš„å”¯ä¸€æ•°æ®æºï¼Œé¿å…çŠ¶æ€ä¸åŒæ­¥ã€‚

### æ‰©å±•æƒé™

| æƒé™ | ç”¨é€” |
|------|------|
| `storage` | å­˜å‚¨ Session å’Œåˆ†æå†å² |
| `activeTab` | è®¿é—®å½“å‰æ ‡ç­¾é¡µå†…å®¹ |
| `sidePanel` | æ˜¾ç¤ºä¾§è¾¹æ ç•Œé¢ |

## ğŸ—„ï¸ æ•°æ®åº“ç»“æ„

### profiles è¡¨

å­˜å‚¨ç”¨æˆ·é…ç½®ä¿¡æ¯ï¼ˆæ˜¯å¦ Pro ç”¨æˆ·ç­‰ï¼‰

### articles è¡¨

å­˜å‚¨ç”¨æˆ·åˆ†æè¿‡çš„æ–‡ç« ä¿¡æ¯

### favorites è¡¨

å­˜å‚¨ç”¨æˆ·æ”¶è—çš„å†…å®¹ï¼ˆä¹ æƒ¯ç”¨æ³•ã€è¯­æ³•ã€è¯æ±‡ï¼‰

### usage_logs è¡¨

è®°å½•ç”¨æˆ·ä½¿ç”¨æ—¥å¿—ï¼Œç”¨äºé™åˆ¶å…è´¹é¢åº¦

## ğŸ“‹ NPM Scripts

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `pnpm dev` | å¯åŠ¨ Chrome å¼€å‘æœåŠ¡å™¨ |
| `pnpm dev:firefox` | å¯åŠ¨ Firefox å¼€å‘æœåŠ¡å™¨ |
| `pnpm build` | æ„å»º Chrome ç”Ÿäº§ç‰ˆæœ¬ |
| `pnpm build:firefox` | æ„å»º Firefox ç”Ÿäº§ç‰ˆæœ¬ |
| `pnpm zip` | æ‰“åŒ… Chrome æ‰©å±• |
| `pnpm zip:firefox` | æ‰“åŒ… Firefox æ‰©å±• |
| `pnpm compile` | TypeScript ç±»å‹æ£€æŸ¥ |

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡ | è¯´æ˜ |
|------|------|
| `VITE_SUPABASE_URL` | Supabase é¡¹ç›® URL |
| `VITE_SUPABASE_ANON_KEY` | Supabase åŒ¿åå¯†é’¥ |

é¡¹ç›®æ”¯æŒå¤šç¯å¢ƒé…ç½®ï¼ŒæŒ‰ä¼˜å…ˆçº§åŠ è½½ï¼š

```
.env.local                     # æœ¬åœ°é…ç½®ï¼ˆæ¨èï¼‰
.env.development.local         # å¼€å‘ç¯å¢ƒæœ¬åœ°é…ç½®
.env.development               # å¼€å‘ç¯å¢ƒé…ç½®
.env                           # é€šç”¨é…ç½®
```

### Supabase é…ç½®

1. åˆ›å»º Supabase é¡¹ç›®
2. è¿è¡Œ `supabase/migrations/001_init.sql` åˆå§‹åŒ–æ•°æ®åº“
3. éƒ¨ç½² Edge Functionï¼š`supabase functions deploy analyze`
4. åœ¨ Edge Function ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ `DEEPSEEK_API_KEY`

### WXT é…ç½®

æŸ¥çœ‹ `wxt.config.ts` äº†è§£å®Œæ•´é…ç½®ï¼š

```ts
export default defineConfig({
  modules: ['@wxt-dev/module-react'],
  manifest: {
    name: 'Nuance',
    description: 'AI-powered English learning assistant',
    permissions: ['storage', 'activeTab', 'sidePanel'],
    // ...
  },
});
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. æäº¤ Pull Request
